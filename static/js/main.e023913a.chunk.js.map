{"version":3,"sources":["pages/RecipeView.tsx","pages/CookbookView.tsx","Settings.ts","pages/SettingsView.tsx","pages/SearchView.tsx","components/Sidebar.tsx","pages/TagsView.tsx","App.tsx","index.tsx"],"names":["Tag","props","url","text","to","RecipeWrapper","id","useParams","x","Number","RecipeView","recipes","tagHTML","tags","map","tag","i","className","length","ingredients","amount","item","steps","s","imgURL","process","imgUrl","RecipeMeta","title","serves","time","sourceURL","href","sourceAuthor","bodyText","src","alt","RecipeJSONLD","recipe","data","cookTime","description","image","recipeIngredient","name","recipeInstructions","join","recipeYield","type","JSON","stringify","Helmet","content","property","CookbookView","tiles","r","desc","substring","style","backgroundImage","CookbookTile","SettingsContext","React","createContext","dataRootURL","indexFile","theme","sidebarCompact","SettingsView","settings","useContext","useState","selectedTheme","setSelectedTheme","compactSidebar","setCompactSidebar","useEffect","onUpdate","updateCompact","value","checked","onChange","options","includeScore","keys","weight","SearchView","searchText","setSearchText","filteredRecipes","setFilteredRecipes","rec","Fuse","search","cookbook","evt","target","Sidebar","emoji","getEmoji","c","classNames","t","hidden","TagCloudView","index","push","tLinks","TagPageWrapper","tagbookData","parseChowdownMd","parsed","matter","console","log","split","trim","directions","yield","App","setCookbook","tagIndex","setTagIndex","setSettings","a","fetch","resp","recipeResp","recipeData","Promise","all","then","rs","book","load","mapping","makeTagGroups","undefined","Provider","basename","path","rootElement","document","getElementById","hasChildNodes","hydrate","render"],"mappings":"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","file":"static/js/main.e023913a.chunk.js","sourcesContent":["import React from \"react\";\nimport { Link, useParams } from \"react-router-dom\";\nimport { Ingredient, Recipe } from \"../models\";\nimport Helmet from \"react-helmet\";\nimport \"../App.css\";\n\nfunction Tag(props: { text: string }) {\n  const url = \"/tags/\" + props.text;\n  return <Link to={url}>{props.text}</Link>;\n}\n\nexport function RecipeWrapper(props: { recipes: Recipe[] }) {\n  const { id } = useParams<{ id: string }>();\n  const x = Number(id);\n  return <RecipeView {...props.recipes[x]} />;\n}\n\nexport default function RecipeView(props: Recipe) {\n  const tagHTML = props.tags.map((tag, i) => {\n    return (\n      <span className=\"recipe-tag\" key={i}>\n        <Tag text={tag} />\n        {i + 1 !== props.tags.length ? \",\" : \"\"}{\" \"}\n      </span>\n    );\n  });\n\n  const ingredients = props.ingredients.map((i: Ingredient) => {\n    // TODO: Add hrecipe unit stuff\n    return (\n      <li className=\"ingredient p-ingredient\">\n        {i.amount !== \"\" && (\n          <span className=\"ingredient-amount\">{i.amount}</span>\n        )}\n        <span className=\"ingredient-item\">{i.item}</span>\n      </li>\n    );\n  });\n\n  const steps = props.steps.map((s) => {\n    return (\n      <li className=\"prep-step\">\n        <p className=\"prep-step-text\">{s}</p>\n      </li>\n    );\n  });\n\n  const imgURL = process.env.PUBLIC_URL + \"/recipes/images/\" + props.imgUrl;\n\n  return (\n    <article className=\"recipe hRecipe h-recipe\">\n      <RecipeMeta {...props} />\n      <h1 className=\"recipe-title fn p-name\">{props.title}</h1>\n      <header className=\"recipe-meta\">\n        {props.serves && (\n          <span className=\"recipe-serves yield\">\n            <b>Yield</b> {props.serves}\n          </span>\n        )}\n        {props.time && (\n          <span className=\"recipe-time\">\n            <b>Time</b> {props.time}\n          </span>\n        )}\n        {props.sourceURL && (\n          <span>\n            <b>Source</b>{\" \"}\n            <a href={props.sourceURL} className=\"recipe-source\">\n              Link\n            </a>\n          </span>\n        )}\n        {props.sourceAuthor && (\n          <span className=\"recipe-author\">\n            <b>By</b> {props.sourceAuthor}{\" \"}\n          </span>\n        )}\n      </header>\n      <div className=\"recipe-info\">\n        <p className=\"recipe-description p-summary summary\">{props.bodyText}</p>\n        <img\n          className=\"recipe-picture u-photo photo\"\n          src={imgURL}\n          alt={props.title}\n        />\n      </div>\n      <div className=\"recipe-tags\">{tagHTML}</div>\n      <div className=\"recipe-body\">\n        <div className=\"recipe-ingredients\">\n          <h2>Ingredients</h2>\n          <ul className=\"ingredients-list\">{ingredients}</ul>\n        </div>\n        <div className=\"recipe-steps\">\n          <h2>Preparation</h2>\n          <ol className=\"prep-steps instructions e-instructions\">{steps}</ol>\n        </div>\n      </div>\n      <RecipeJSONLD recipe={props} />\n    </article>\n  );\n}\n\n// TODO: expand this\nfunction RecipeJSONLD(props: { recipe: Recipe }) {\n  const data = {\n    \"@context\": \"https://schema.org\",\n    \"@type\": \"Recipe\",\n    cookTime: props.recipe.time,\n    description: props.recipe.bodyText,\n    image: props.recipe.imgUrl,\n    recipeIngredient: props.recipe.ingredients,\n    name: props.recipe.title,\n    recipeInstructions: props.recipe.steps.join(\". \"),\n    recipeYield: props.recipe.serves,\n  };\n  return <script type=\"application/ld+json\">{JSON.stringify(data)}</script>;\n}\n\nfunction RecipeMeta(props: Recipe) {\n  const imgURL = process.env.PUBLIC_URL + \"/recipes/images/\" + props.imgUrl;\n\n  return (\n    <Helmet>\n      <title>{props.title} - Cilantro</title>\n      <meta content=\"article\" property=\"og:type\"  />\n      <meta content={props.title} property=\"og:title\" />\n      <meta content={props.bodyText} property=\"og:description\" />\n      <meta content={imgURL} property=\"og:image\" />\n      <meta property=\"og:site_name\" content=\"Cilantro Recipes\" />\n      {props.sourceAuthor && <meta property=\"og:author\" content={props.sourceAuthor} />}\n      {props.sourceURL && <meta property=\"og:url\" content={props.sourceURL} />}\n      <meta name=\"twitter:card\" content=\"summary_large_image\" />\n    </Helmet>\n  );\n}\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { CookbookData, Recipe } from \"../models\";\n\nimport \"../App.css\";\n\nfunction CookbookTile(props: Recipe) {\n  const href = \"/r/\" + props.id;\n  const imgURL = process.env.PUBLIC_URL + \"/recipes/images/\" + props.imgUrl;\n  const desc = props.bodyText && props.bodyText.substring(0, 100) + \"...\";\n\n  return (\n    <div className=\"cookbook-tile\">\n      <div\n        className=\"cookbook-tile-image\"\n        style={{\n          backgroundImage: `url(${imgURL})`,\n        }}\n      >\n        <Link className=\"cookbook-tile-title\" to={href}>\n          {props.title}\n        </Link>\n      </div>\n      <div className=\"cookbook-tile-text\">{desc}</div>\n    </div>\n  );\n}\n\nexport default function CookbookView(props: CookbookData) {\n  const recipes = props.recipes || []\n\n  const tiles = recipes.map((r) => {\n    return CookbookTile(r);\n  });\n\n  return (\n    <div className=\"cookbook-holder\">\n      <h1 className=\"cookbook-title\">{props.title}</h1>\n      <pre className=\"cookbook-description\">{props.description}</pre>\n      <div className=\"cookbook\">{tiles}</div>\n    </div>\n  );\n}\n","import React from \"react\";\n\nexport interface AppSettings {\n  dataRootURL: string;\n  indexFile: string;\n  theme: string;\n  sidebarCompact: boolean;\n}\n\nexport const SettingsContext = React.createContext<AppSettings>({\n  // TODO: update\n  dataRootURL: \"http://localhost:3000/recipes/\",\n  indexFile: \"README.md\",\n  theme: \"light\",\n  sidebarCompact: false,\n});\n\nexport function getEmoji(settings: AppSettings): string {\n  let emoji;\n  switch (settings.theme) {\n    case \"red\": {\n      emoji = \"ðŸŽ\";\n      break;\n    }\n    case \"blue\": {\n      emoji = \"ðŸ«\";\n      break;\n    }\n    case \"green\": {\n      emoji = \"ðŸˆ\";\n      break;\n    }\n    case \"dark\": {\n      emoji = \"ðŸ‡\";\n      break;\n    }\n    default: {\n      emoji = \"ðŸŒ¿\";\n    }\n  }\n\n  return emoji;\n}\n","import React, { useContext, useEffect, useState } from \"react\";\nimport { SettingsContext } from \"../Settings\";\n\nexport default function SettingsView(props: {\n  onUpdate: (theme: string) => void;\n  updateCompact: (sidebarCompact: boolean) => void;\n}) {\n  const settings = useContext(SettingsContext);\n  const [selectedTheme, setSelectedTheme] = useState(settings.theme);\n  const [compactSidebar, setCompactSidebar] = useState(settings.sidebarCompact);\n\n  useEffect(() => {\n    if (settings.theme !== selectedTheme) {\n      props.onUpdate(selectedTheme);\n    }\n  }, [selectedTheme, props, settings]);\n\n  useEffect(() => {\n    if (settings.sidebarCompact !== compactSidebar) {\n      props.updateCompact(compactSidebar);\n    }\n  }, [compactSidebar, props, settings]);\n\n  return (\n    <div>\n      <h1>Settings</h1>\n      <h2>Theme</h2>\n      <form>\n        <div className=\"theme-radio\">\n          <label>\n            <input\n              type=\"radio\"\n              name=\"theme\"\n              value=\"light\"\n              checked={selectedTheme === \"light\"}\n              onChange={() => setSelectedTheme(\"light\")}\n              className=\"theme-radio-input\"\n            />\n            Light\n          </label>\n        </div>\n        <div className=\"theme-radio\">\n          <label>\n            <input\n              type=\"radio\"\n              name=\"theme\"\n              value=\"blue\"\n              checked={selectedTheme === \"blue\"}\n              onChange={() => setSelectedTheme(\"blue\")}\n              className=\"theme-radio-input\"\n            />\n            Blue\n          </label>\n        </div>\n        <div className=\"theme-radio\">\n          <label>\n            <input\n              type=\"radio\"\n              name=\"theme\"\n              value=\"green\"\n              checked={selectedTheme === \"green\"}\n              onChange={() => setSelectedTheme(\"green\")}\n              className=\"theme-radio-input\"\n            />\n            Green\n          </label>\n        </div>\n        <div className=\"theme-radio\">\n          <label>\n            <input\n              type=\"radio\"\n              name=\"theme\"\n              value=\"red\"\n              checked={selectedTheme === \"red\"}\n              onChange={() => setSelectedTheme(\"red\")}\n              className=\"theme-radio-input\"\n            />\n            Red\n          </label>\n        </div>\n        <div className=\"theme-radio\">\n          <label>\n            <input\n              type=\"radio\"\n              name=\"theme\"\n              value=\"dark\"\n              checked={selectedTheme === \"dark\"}\n              onChange={() => setSelectedTheme(\"dark\")}\n              className=\"theme-radio-input\"\n            />\n            Dark\n          </label>\n        </div>\n      </form>\n      <h2>Compact Sidebar</h2>\n      <label>\n        <input\n          type=\"checkbox\"\n          checked={compactSidebar}\n          onChange={() => setCompactSidebar(!compactSidebar)}\n        />{\" \"}\n        Compact sidebar\n      </label>\n    </div>\n  );\n}\n","import React, { useEffect, useState } from \"react\";\nimport Fuse from \"fuse.js\";\nimport { Recipe } from \"../models\";\nimport CookbookView from \"./CookbookView\";\n\nconst options = {\n  includeScore: true,\n  keys: [\n    {\n      name: \"title\",\n      weight: 0.25,\n    },\n    {\n      name: \"tags\",\n      weight: 0.35,\n    },\n    {\n      name: \"ingredients\",\n      weight: 0.35,\n    },\n    {\n      name: \"steps\",\n      weight: 0.05,\n    },\n  ],\n};\n\nexport function SearchView(props: { recipes: Recipe[] }) {\n  const [searchText, setSearchText] = useState(\"\");\n  const [filteredRecipes, setFilteredRecipes] = useState(props.recipes);\n\n  useEffect(() => {\n    const fuse = new Fuse(props.recipes, options);\n    const res = fuse.search(searchText);\n\n    // hopefully the lib already sorts by score lol\n    const rec = res.map((r) => r.item);\n    setFilteredRecipes(rec);\n  }, [props, searchText]);\n\n  const cookbook = {\n    title: \"Results\",\n    description: \"\",\n    recipes: filteredRecipes,\n  };\n\n  return (\n    <div>\n      <h1>Search</h1>\n      <input\n        type=\"text\"\n        value={searchText}\n        onChange={(evt) => setSearchText(evt.target.value)}\n      />\n      <CookbookView {...cookbook} />\n    </div>\n  );\n}\n","import { AppSettings, getEmoji, SettingsContext } from \"../Settings\";\nimport React, { useContext } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Home, Search, Settings, Tag } from \"react-feather\";\nimport classNames from \"classnames\";\n\nexport default function Sidebar() {\n  const settings = useContext<AppSettings>(SettingsContext);\n  const emoji = getEmoji(settings);\n\n  const c = classNames({\n    \"app-sidebar\": !settings.sidebarCompact,\n    \"app-sidebar-c\": settings.sidebarCompact,\n  });\n\n  const t = classNames({\n    hidden: settings.sidebarCompact,\n  });\n\n  return (\n    <nav className={c}>\n      <section className=\"app-sidebar-body\">\n        <Link className=\"app-sidebar-link\" to=\"/\">\n          <Home /> <span className={t}>Home</span>\n        </Link>\n        <Link className=\"app-sidebar-link\" to=\"/tags\">\n          <Tag /> <span className={t}>Tags</span>\n        </Link>\n        <Link className=\"app-sidebar-link\" to=\"/search\">\n          <Search /> <span className={t}>Search</span>\n        </Link>\n        <Link className=\"app-sidebar-link\" to=\"/settings/\">\n          <Settings /> <span className={t}>Settings</span>\n        </Link>\n      </section>\n      <footer\n        className={classNames(\"app-sidebar-footer\", {\n          hidden: settings.sidebarCompact,\n        })}\n      >\n        <i>Cilantro v0</i> <br/> Made with {emoji}\n      </footer>\n    </nav>\n  );\n}\n","import React from \"react\";\nimport { Link, useParams } from \"react-router-dom\";\nimport { Recipe } from \"../models\";\nimport CookbookView from \"./CookbookView\";\n\nexport function TagCloudView(props: { index: { [tag: string]: Recipe[] } }) {\n  const tags = [];\n\n  for (const t in props.index) {\n    tags.push(t);\n  }\n\n  const tLinks = tags.map((t, i) => {\n    const url = \"/tags/\" + t;\n    return (\n      <span className=\"recipe-tags\" key={i}>\n        <Link to={url}>{t}</Link>\n        {i + 1 !== tags.length ? \",\" : \"\"}\n      </span>\n    );\n  });\n\n  return (\n    <div>\n      <h1>Tags</h1>\n      {tLinks}\n    </div>\n  );\n}\n\nexport function TagPageWrapper(props: { index: { [tag: string]: Recipe[] } }) {\n  const { tag } = useParams<{ tag: string }>();\n  const tagbookData = {\n    title: \"Tag: \" + tag,\n    description: \"\",\n    recipes: props.index[tag],\n  };\n  return <CookbookView {...tagbookData} />;\n}\n","import React, { useEffect, useState } from \"react\";\n\nimport matter from \"gray-matter\";\n\nimport \"./App.css\";\nimport { RecipeWrapper } from \"./pages/RecipeView\";\nimport CookbookView from \"./pages/CookbookView\";\n\nimport { Switch, Route, BrowserRouter } from \"react-router-dom\";\nimport { CookbookData, Recipe } from \"./models\";\nimport SettingsView from \"./pages/SettingsView\";\nimport { SearchView } from \"./pages/SearchView\";\nimport { AppSettings, SettingsContext } from \"./Settings\";\nimport Sidebar from \"./components/Sidebar\";\nimport { TagCloudView, TagPageWrapper } from \"./pages/TagsView\";\n\nfunction parseChowdownMd(id: number, data: string): Recipe {\n  const parsed = matter(data);\n  console.log(parsed);\n\n  const title = parsed.data.title;\n  const tags = parsed.data.tags.split(\",\").map((t: string) => t.trim());\n  const imgUrl = parsed.data.image;\n  const steps = parsed.data.directions;\n  const ingredients = parsed.data.ingredients.map((s: string) => {\n    // want to look for \"N\" or \"N/M\" or \"N and M\" or \"N or M\"\n    return { amount: \"\", item: s };\n  });\n  const serves = parsed.data.yield;\n  const time = parsed.data.time;\n  const sourceURL = parsed.data.sourceURL;\n  const sourceAuthor = parsed.data.sourceAuthor;\n\n  return {\n    id,\n    title,\n    tags,\n    imgUrl,\n    steps,\n    serves,\n    sourceURL,\n    sourceAuthor,\n    time,\n    ingredients,\n    bodyText: parsed.content,\n  };\n}\n\nfunction makeTagGroups(recipes: Recipe[]): { [tag: string]: Recipe[] } {\n  const mapping: { [tag: string]: Recipe[] } = {};\n  for (const r of recipes) {\n    for (const t of r.tags) {\n      if (!(t in mapping)) {\n        mapping[t] = [];\n      }\n      mapping[t].push(r);\n    }\n  }\n\n  return mapping;\n}\n\nexport default function App() {\n  const [cookbook, setCookbook] = useState<CookbookData>();\n  const [tagIndex, setTagIndex] = useState<{ [tag: string]: Recipe[] }>({});\n  const [settings, setSettings] = useState<AppSettings>({\n    dataRootURL: process.env.PUBLIC_URL + \"/recipes/\",\n    indexFile: \"README.md?raw=true\",\n    theme: \"light\",\n    sidebarCompact: true,\n  });\n\n  // TODO: This is really bad, but it works.\n  // Fix this when I better understand async again. I wish it was as easy as go.\n  useEffect(() => {\n    async function load() {\n      const resp = await fetch(settings.dataRootURL + settings.indexFile);\n      const data = await resp.text();\n\n      const parsed = matter(data);\n\n      const recipes = parsed.data.recipes.map(\n        async (name: string, i: number) => {\n          const recipeResp = await fetch(\n            settings.dataRootURL + \"recipes/\" + name + \".md?raw=true\"\n          );\n          const recipeData = await recipeResp.text();\n          return parseChowdownMd(i, recipeData);\n        }\n      );\n\n      Promise.all(recipes).then((rs: any) => {\n        const book = {\n          title: parsed.data.title,\n          description: parsed.content,\n          recipes: rs,\n        };\n        setCookbook(book);\n      });\n    }\n\n    load();\n  }, [settings]);\n\n  useEffect(() => {\n    if (cookbook) {\n      const i = makeTagGroups(cookbook.recipes);\n      setTagIndex(i);\n    }\n  }, [cookbook]);\n\n  if (settings.dataRootURL === \"\") {\n    return <div />;\n  } else if (settings.indexFile === \"\") {\n    return <div />;\n  }\n\n  if (cookbook === undefined) {\n    return <div>Loading...</div>;\n  }\n\n  function updateTheme(theme: string) {\n    console.log(theme);\n    setSettings({ ...settings, theme });\n  }\n\n  function updateCompact(sidebarCompact: boolean) {\n    setSettings({ ...settings, sidebarCompact });\n  }\n\n  return (\n    <SettingsContext.Provider value={settings}>\n      <BrowserRouter basename=\"cilantro\" >\n        <div className={\"app app-theme-\" + settings.theme}>\n          <Sidebar />\n          <main className=\"app-content\">\n            <Switch>\n              <Route path=\"/r/:id\">\n                <RecipeWrapper recipes={cookbook.recipes} />\n              </Route>\n              <Route path=\"/tags/:tag\">\n                <TagPageWrapper index={tagIndex} />\n              </Route>\n              <Route path=\"/tags/\">\n                <TagCloudView index={tagIndex} />\n              </Route>\n              <Route path=\"/search/\">\n                <SearchView recipes={cookbook.recipes} />\n              </Route>\n              <Route path=\"/settings/\">\n                <SettingsView\n                  onUpdate={updateTheme}\n                  updateCompact={updateCompact}\n                />\n              </Route>\n              <Route path=\"/\">\n                <CookbookView {...cookbook} />\n              </Route>\n            </Switch>\n          </main>\n        </div>\n      </BrowserRouter>\n    </SettingsContext.Provider>\n  );\n}\n","import React from \"react\";\nimport { hydrate, render } from \"react-dom\";\nimport \"./App.css\";\nimport App from \"./App\";\n\nconst rootElement = document.getElementById(\"root\");\nif (rootElement && rootElement.hasChildNodes()) {\n  hydrate(<App />, rootElement);\n} else {\n  render(<App />, rootElement);\n}\n"],"sourceRoot":""}